<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Restaurante</title>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>
<body>
    <div id="app" class="p-3">
        <div class="d-flex w-100 text-center justify-content-center">
            <h2>Restaurant Checkout</h2>
        </div>
        <form class="">
            <div class="mb-3 d-flex justify-content-center align-items-center"  >
              <label  for="name" class="form-label ">Name of Client: </label>
              <div class="input-group w-50 ps-2">
                <input id="name" v-model="name"  type="text" class="form-control">
              </div>
              
            </div>
            <section class="d-flex flex-row"> 
                <div class="d-flex flex-column w-50">
                    <div v-for='product in products' class="d-flex flex-column w-100 p-1 " style="border: solid 1px black" >
                        <div class="d-flex flex-column align-items-center">
                            <h6>Meal: {{product.name}}</h6>
                            <p><strong> Price:$ {{(product.price).toFixed(2)}}</strong></p>
                        </div>
                        <div class="d-flex align-items-center text-center justify-content-center">
                            <button  class="btn btn-danger" @click.prevent="product.quantity--" :disabled='product.quantity <= 0'>-</button>
                            <span class="p-1">{{product.quantity}}</span>
                            <button class="btn btn-success" @click.prevent="product.quantity++">+</button>
                        </div>
                    </div>

                </div>

                <div  v-if='submit == true' class="d-flex w-50  flex-column m-4 text-center " >
                    <strong>Order Details</strong>
                    <div class="d-flex justify-content-start">
                        <h5>{{name}}</h5>
                    </div>
                    <div v-for='product in products'>
                        <template v-if='product.quantity > 0'>
                            <p>{{product.quantity + 'x ' + product.name}}</p>
                            <p> Total:$ {{(product.quantity * product.price).toFixed(2)}}</p>
                           
                        </template>
                    </div>
                    <div class="d-flex justify-content-end flex-column" >
                        <p> <strong> Total:$ {{ total() }}</strong> </p>
                        <p> <strong> Total x 10%: $ {{ percent() }}</strong> </p>
                        
                    </div>
                </div>
            </section>
                     
          </form>
          <div class="d-flex w-100 text-center justify-content-center">
            <button  type="submit" class="btn btn-primary w-50 mt-3">10% ?</button>

        </div>
          <div @submit.prevent="onSubmit" class="d-flex w-100 text-center justify-content-center">
              <button type="submit" class="btn btn-primary w-50 mt-3" >Submit</button>

          </div>
          

    </div>


    <script src="script.js"></script>
    <script>
        var app = new Vue ({
            el: '#app',

            data() {
                return {
                    name: '',
                    clients: [],
                    products: window.products,
                    submit: true,
                    percents: []
                    
                }
            }, methods: {
                onSubmit() {
                    this.clients.push({
                        name: this.name
                    });
                    this.name = '';
                },

                total() {
                    var total = 0;

                    this.products.forEach(item => {
                        if(item.quantity > 0) {
                            total += item.price * item.quantity
                        }
                    });

                    return total.toFixed(2)
                },

                percent() {
                    var total = 0;

                    this.products.forEach(item => {
                        if(item.quantity > 0) {
                            total =+ item.price * item.quantity * 0.1
                            
                        }                          
                    });
                    return total.toFixed(2)

                    
                },

                
            
                
            },
            
        
        }) 

    </script>
    <style scoped>
        body {
            background-color: rgb(218, 218, 243);
        }


    </style>
    
</body>
</html>